<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ClaudeSim ‚Äî Learn Claude by Doing | AI Literacy Simulation Platform</title>
<meta name="description" content="Master Claude through interactive professional simulations. Real scenarios, real-time AI coaching, measurable skill progression. By Panda Projet.">
<meta name="keywords" content="Claude AI training, AI literacy, prompting skills, AI simulation, learn Claude, Anthropic, prompt engineering, AI coaching">
<meta name="author" content="Panda Projet Inc.">
<meta property="og:title" content="ClaudeSim ‚Äî Learn Claude by Doing">
<meta property="og:description" content="The only platform where you practice with Claude in real professional scenarios with AI coaching.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://claudesim.app">
<meta property="og:image" content="https://claudesim.app/og-image.png">
<meta name="twitter:card" content="summary_large_image">
<link rel="canonical" href="https://claudesim.app">
<link rel="alternate" hreflang="fr" href="https://claudesim.app?lang=fr">
<link rel="alternate" hreflang="en" href="https://claudesim.app?lang=en">

<!-- Structured Data / GEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "ClaudeSim",
  "applicationCategory": "EducationalApplication",
  "operatingSystem": "Web",
  "description": "AI Literacy Simulation Platform ‚Äî Learn Claude by doing through interactive professional scenarios with real-time AI coaching.",
  "url": "https://claudesim.app",
  "author": {"@type": "Organization", "name": "Panda Projet Inc.", "url": "https://pandaprojet.com"},
  "offers": [
    {"@type": "Offer", "price": "0", "priceCurrency": "USD", "name": "Discovery"},
    {"@type": "Offer", "price": "29", "priceCurrency": "USD", "name": "Pro Monthly"},
    {"@type": "Offer", "price": "249", "priceCurrency": "USD", "name": "Pro Lifetime"}
  ]
}
</script>

<!-- GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XXXXXXXXXX');
</script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://js.stripe.com/v3/"></script>
<style>
:root {
  --bg-primary: #0a0f1e;
  --bg-secondary: #0f172a;
  --bg-card: #151d30;
  --bg-card-hover: #1a2540;
  --text-primary: #f1f5f9;
  --text-secondary: #cbd5e1;
  --text-muted: #94a3b8;
  --accent: #2563eb;
  --accent-light: #3b82f6;
  --accent-dark: #1e40af;
  --accent-gradient: linear-gradient(135deg, #1e3a5f 0%, #2563eb 100%);
  --accent-glow: rgba(37, 99, 235, 0.3);
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;
  --border: rgba(255,255,255,0.08);
  --border-accent: rgba(37,99,235,0.3);
  --radius: 12px;
  --radius-lg: 16px;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Inter', -apple-system, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; overflow-x: hidden; }
a { color: var(--accent-light); text-decoration: none; }
a:hover { color: #60a5fa; }

/* Utility */
.container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.gradient-text { background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 50%, #93c5fd 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
.badge { display: inline-block; padding: 6px 16px; background: rgba(37,99,235,0.15); border: 1px solid var(--border-accent); border-radius: 999px; font-size: 13px; color: var(--accent-light); font-weight: 500; }
.btn { display: inline-block; padding: 12px 28px; border-radius: 8px; font-weight: 600; font-size: 15px; cursor: pointer; border: none; transition: all 0.2s; font-family: inherit; }
.btn-primary { background: var(--accent-gradient); color: white; box-shadow: 0 4px 20px var(--accent-glow); }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 30px var(--accent-glow); }
.btn-secondary { background: transparent; color: var(--text-primary); border: 1px solid var(--border); }
.btn-secondary:hover { border-color: var(--accent-light); background: rgba(37,99,235,0.08); }
.btn-google { background: white; color: #333; font-weight: 500; display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #ddd; cursor: pointer; font-size: 14px; font-family: inherit; transition: all 0.2s; }
.btn-google:hover { background: #f5f5f5; }
.section-label { text-transform: uppercase; font-size: 13px; font-weight: 600; letter-spacing: 2px; color: var(--accent-light); margin-bottom: 12px; }
.section-title { font-size: clamp(28px, 4vw, 42px); font-weight: 800; margin-bottom: 16px; line-height: 1.2; }
.section-subtitle { font-size: 18px; color: var(--text-secondary); max-width: 640px; margin: 0 auto 48px; }

/* NAV */
nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; background: rgba(10,15,30,0.85); backdrop-filter: blur(20px); border-bottom: 1px solid var(--border); }
.nav-inner { display: flex; align-items: center; justify-content: space-between; padding: 14px 24px; max-width: 1200px; margin: 0 auto; }
.nav-logo { font-size: 22px; font-weight: 800; }
.nav-logo span { color: var(--accent-light); }
.nav-links { display: flex; align-items: center; gap: 28px; }
.nav-links a { color: var(--text-secondary); font-size: 14px; font-weight: 500; transition: color 0.2s; }
.nav-links a:hover { color: var(--text-primary); }
.nav-cta { padding: 8px 20px; font-size: 14px; }
.nav-lang { cursor: pointer; font-size: 13px; color: var(--text-muted); border: 1px solid var(--border); padding: 4px 10px; border-radius: 6px; background: transparent; }
.nav-user { display: flex; align-items: center; gap: 12px; }
.nav-user-name { font-size: 14px; color: var(--text-secondary); }

/* HERO */
.hero { padding: 160px 0 100px; text-align: center; position: relative; overflow: hidden; }
.hero::before { content: ''; position: absolute; top: -200px; left: 50%; transform: translateX(-50%); width: 800px; height: 800px; background: radial-gradient(ellipse, rgba(37,99,235,0.12) 0%, transparent 70%); pointer-events: none; }
.hero h1 { font-size: clamp(36px, 5vw, 64px); font-weight: 800; line-height: 1.1; margin: 20px 0 24px; }
.hero p { font-size: 20px; color: var(--text-secondary); max-width: 600px; margin: 0 auto 36px; }
.hero-cta { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
.hero-stats { display: flex; gap: 48px; justify-content: center; margin-top: 60px; }
.hero-stat { text-align: center; }
.hero-stat-num { font-size: 32px; font-weight: 800; color: var(--accent-light); }
.hero-stat-label { font-size: 14px; color: var(--text-secondary); margin-top: 4px; }

/* DEMO PREVIEW */
.demo-preview { margin: 60px auto 0; max-width: 900px; background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-lg); overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.4); }
.demo-header { display: flex; gap: 0; background: var(--bg-secondary); border-bottom: 1px solid var(--border); }
.demo-tab { flex: 1; padding: 12px 16px; text-align: center; font-size: 13px; font-weight: 600; color: var(--text-secondary); border-right: 1px solid var(--border); text-transform: uppercase; letter-spacing: 1px; }
.demo-tab:last-child { border-right: none; }
.demo-tab.active { color: var(--accent-light); background: rgba(37,99,235,0.08); }
.demo-body { display: grid; grid-template-columns: 30% 50% 20%; min-height: 200px; }
.demo-panel { padding: 16px; border-right: 1px solid var(--border); font-size: 14px; }
.demo-panel:last-child { border-right: none; }
.demo-panel h4 { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); margin-bottom: 10px; }
.demo-panel p { color: var(--text-primary); font-size: 14px; line-height: 1.6; }
.demo-prompt { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; padding: 10px 14px; margin-top: 12px; font-family: 'Courier New', monospace; font-size: 13px; color: var(--accent-light); }
.demo-coach { background: rgba(37,99,235,0.08); border-radius: 8px; padding: 12px; margin-top: 10px; font-size: 14px; color: var(--text-primary); border-left: 3px solid var(--accent); }

/* FEATURES */
.features { padding: 100px 0; text-align: center; }
.features-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-top: 48px; }
.feature-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 32px; text-align: left; transition: all 0.3s; }
.feature-card:hover { border-color: var(--border-accent); transform: translateY(-4px); box-shadow: 0 12px 40px rgba(0,0,0,0.3); }
.feature-icon { width: 48px; height: 48px; background: var(--accent-gradient); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; margin-bottom: 16px; }
.feature-card h3 { font-size: 18px; font-weight: 700; margin-bottom: 8px; }
.feature-card p { font-size: 14px; color: var(--text-secondary); line-height: 1.6; }

/* HOW IT WORKS */
.how-it-works { padding: 100px 0; text-align: center; background: var(--bg-secondary); }
.steps { display: grid; grid-template-columns: repeat(5, 1fr); gap: 16px; margin-top: 48px; }
.step { position: relative; padding: 24px 16px; }
.step-num { width: 40px; height: 40px; background: var(--accent-gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 16px; margin: 0 auto 16px; }
.step h4 { font-size: 15px; font-weight: 700; margin-bottom: 6px; }
.step p { font-size: 14px; color: var(--text-secondary); }
.step::after { content: '‚Üí'; position: absolute; right: -8px; top: 34px; color: var(--text-muted); font-size: 18px; }
.step:last-child::after { display: none; }

/* SCENARIOS */
.scenarios-section { padding: 100px 0; text-align: center; }
.scenarios-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-top: 48px; }
.scenario-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 28px; text-align: left; transition: all 0.3s; }
.scenario-card:hover { border-color: var(--border-accent); }
.scenario-meta { display: flex; gap: 8px; margin-bottom: 12px; flex-wrap: wrap; }
.scenario-tag { font-size: 12px; padding: 3px 10px; border-radius: 999px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
.scenario-tag.domain { background: rgba(37,99,235,0.15); color: var(--accent-light); }
.scenario-tag.level { background: rgba(16,185,129,0.15); color: #34d399; }
.scenario-tag.free { background: rgba(245,158,11,0.15); color: #fbbf24; }
.scenario-tag.locked { background: rgba(100,116,139,0.15); color: var(--text-secondary); }
.scenario-card h3 { font-size: 16px; font-weight: 700; margin-bottom: 8px; line-height: 1.3; }
.scenario-card p { font-size: 14px; color: var(--text-secondary); line-height: 1.5; }
.scenario-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding-top: 12px; border-top: 1px solid var(--border); }
.scenario-footer span { font-size: 13px; color: var(--text-secondary); }
.scenario-comps { display: flex; gap: 4px; }
.comp-badge { font-size: 11px; background: rgba(37,99,235,0.12); color: var(--accent-light); padding: 3px 8px; border-radius: 4px; font-weight: 600; }

/* PRICING */
.pricing { padding: 100px 0; text-align: center; background: var(--bg-secondary); }
.pricing-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; max-width: 960px; margin: 48px auto 0; }
.pricing-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 36px 28px; text-align: left; position: relative; transition: all 0.3s; }
.pricing-card.featured { border-color: var(--accent); box-shadow: 0 0 40px var(--accent-glow); }
.pricing-card.featured::before { content: 'MOST POPULAR'; position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: var(--accent-gradient); padding: 4px 16px; border-radius: 999px; font-size: 11px; font-weight: 700; letter-spacing: 1px; }
.pricing-card h3 { font-size: 20px; font-weight: 700; margin-bottom: 4px; }
.pricing-card .price { font-size: 42px; font-weight: 800; margin: 16px 0; }
.pricing-card .price span { font-size: 16px; font-weight: 400; color: var(--text-secondary); }
.pricing-card .price-note { font-size: 14px; color: var(--text-secondary); margin-bottom: 20px; }
.pricing-features { list-style: none; margin-bottom: 28px; }
.pricing-features li { padding: 6px 0; font-size: 14px; color: var(--text-secondary); display: flex; align-items: center; gap: 8px; }
.pricing-features li::before { content: '‚úì'; color: var(--success); font-weight: 700; }
.pricing-card .btn { width: 100%; text-align: center; }

/* FAQ */
.faq { padding: 100px 0; }
.faq-list { max-width: 720px; margin: 48px auto 0; }
.faq-item { border-bottom: 1px solid var(--border); }
.faq-q { padding: 20px 0; font-weight: 600; font-size: 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
.faq-q::after { content: '+'; font-size: 20px; color: var(--text-muted); transition: transform 0.2s; }
.faq-item.open .faq-q::after { content: '‚àí'; }
.faq-a { max-height: 0; overflow: hidden; transition: max-height 0.3s; }
.faq-item.open .faq-a { max-height: 200px; }
.faq-a p { padding-bottom: 20px; font-size: 14px; color: var(--text-secondary); line-height: 1.7; }

/* CTA */
.final-cta { padding: 100px 0; text-align: center; background: var(--bg-secondary); }
.final-cta h2 { font-size: clamp(28px, 4vw, 40px); font-weight: 800; margin-bottom: 16px; }
.final-cta p { font-size: 17px; color: var(--text-secondary); margin-bottom: 32px; }

/* FOOTER */
footer { padding: 48px 0 32px; border-top: 1px solid var(--border); }
.footer-inner { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
.footer-brand { font-weight: 700; }
.footer-links { display: flex; gap: 24px; }
.footer-links a { font-size: 14px; color: var(--text-secondary); }
.footer-copy { font-size: 13px; color: var(--text-secondary); text-align: center; margin-top: 24px; }
.footer-ecosystem { display: flex; gap: 16px; flex-wrap: wrap; }
.footer-ecosystem a { font-size: 13px; padding: 4px 10px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px; color: var(--text-secondary); }

/* AUTH MODAL */
.modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); z-index: 200; align-items: center; justify-content: center; }
.modal-overlay.active { display: flex; }
.modal { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 40px; width: 100%; max-width: 420px; position: relative; }
.modal h2 { font-size: 24px; font-weight: 800; margin-bottom: 6px; }
.modal p.subtitle { font-size: 14px; color: var(--text-secondary); margin-bottom: 24px; }
.modal-close { position: absolute; top: 16px; right: 16px; background: none; border: none; color: var(--text-muted); font-size: 20px; cursor: pointer; }
.form-group { margin-bottom: 16px; }
.form-group label { display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-secondary); }
.form-group input { width: 100%; padding: 11px 14px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary); font-size: 14px; font-family: inherit; outline: none; transition: border-color 0.2s; }
.form-group input:focus { border-color: var(--accent); }
.form-error { color: var(--danger); font-size: 13px; margin-top: 4px; display: none; }
.form-error.show { display: block; }
.form-divider { display: flex; align-items: center; gap: 12px; margin: 20px 0; }
.form-divider span { font-size: 13px; color: var(--text-muted); }
.form-divider::before, .form-divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }
.form-switch { font-size: 13px; color: var(--text-secondary); margin-top: 20px; text-align: center; }
.form-switch a { color: var(--accent-light); cursor: pointer; font-weight: 500; }
.form-forgot { font-size: 13px; text-align: right; margin-top: -8px; margin-bottom: 16px; }
.form-forgot a { color: var(--accent-light); cursor: pointer; }
.toast { position: fixed; top: 80px; right: 24px; padding: 14px 20px; border-radius: 10px; font-size: 14px; font-weight: 500; z-index: 300; transform: translateX(150%); transition: transform 0.3s; }
.toast.show { transform: translateX(0); }
.toast.success { background: #065f46; color: #a7f3d0; border: 1px solid #10b981; }
.toast.error { background: #7f1d1d; color: #fecaca; border: 1px solid #ef4444; }

/* RESPONSIVE */
@media (max-width: 768px) {
  .features-grid, .scenarios-grid, .pricing-grid { grid-template-columns: 1fr; }
  .steps { grid-template-columns: 1fr; }
  .step::after { display: none; }
  .demo-body { grid-template-columns: 1fr; }
  .demo-panel { border-right: none; border-bottom: 1px solid var(--border); }
  .hero-stats { flex-direction: column; gap: 20px; }
  .nav-links { display: none; }
}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-inner">
    <div class="nav-logo">Claude<span>Sim</span></div>
    <div class="nav-links">
      <a href="#features" data-i18n="nav_features">Features</a>
      <a href="#scenarios" data-i18n="nav_scenarios">Scenarios</a>
      <a href="#pricing" data-i18n="nav_pricing">Pricing</a>
      <a href="#faq">FAQ</a>
      <button class="nav-lang" onclick="toggleLang()">FR</button>
      <div id="navAuth">
        <button class="btn btn-primary nav-cta" onclick="showModal('login')" data-i18n="nav_login">Sign In</button>
      </div>
    </div>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="container">
    <span class="badge" data-i18n="hero_badge">üéØ AI Literacy Simulation Platform</span>
    <h1 data-i18n="hero_title">Learn <span class="gradient-text">Claude</span> by Doing</h1>
    <p data-i18n="hero_subtitle">Master AI prompting through interactive professional simulations. Real scenarios, real-time coaching, measurable skill progression.</p>
    <div class="hero-cta">
      <button class="btn btn-primary" onclick="showModal('register')" data-i18n="hero_cta">Start Free Simulation ‚Üí</button>
      <a href="#how-it-works" class="btn btn-secondary" data-i18n="hero_cta2">See How It Works</a>
    </div>
    <div class="hero-stats">
      <div class="hero-stat"><div class="hero-stat-num">8</div><div class="hero-stat-label" data-i18n="stat_scenarios">Scenarios</div></div>
      <div class="hero-stat"><div class="hero-stat-num">6</div><div class="hero-stat-label" data-i18n="stat_competencies">Competencies Tracked</div></div>
      <div class="hero-stat"><div class="hero-stat-num">‚àû</div><div class="hero-stat-label" data-i18n="stat_practice">Practice Possibilities</div></div>
    </div>

    <!-- DEMO PREVIEW -->
    <div class="demo-preview">
      <div class="demo-header">
        <div class="demo-tab" data-i18n="demo_brief">üìã Scenario Brief</div>
        <div class="demo-tab active" data-i18n="demo_claude">üí¨ Claude Interface</div>
        <div class="demo-tab" data-i18n="demo_aria">ü§ñ ARIA Coach</div>
      </div>
      <div class="demo-body">
        <div class="demo-panel">
          <h4 data-i18n="demo_brief_title">Scenario S01</h4>
          <p data-i18n="demo_brief_text">Write a professional email to announce an organizational restructuring affecting 45 employees. Maintain morale and clarity.</p>
          <div style="margin-top:16px">
            <div style="font-size:11px;color:var(--text-muted);margin-bottom:4px;" data-i18n="demo_level">Level: Beginner ¬∑ 15 min</div>
            <div style="display:flex;gap:4px;"><span class="comp-badge">C1</span><span class="comp-badge">C3</span></div>
          </div>
        </div>
        <div class="demo-panel">
          <h4 data-i18n="demo_chat_title">Chat with Claude</h4>
          <div class="demo-prompt" data-i18n="demo_prompt">‚Üí Write me an email about the restructuring</div>
          <p style="margin-top:10px;font-size:12px;color:var(--text-secondary);" data-i18n="demo_response">Claude: "Here's a draft email announcing the organizational restructuring..."</p>
        </div>
        <div class="demo-panel">
          <h4>ARIA ü§ñ</h4>
          <div class="demo-coach" data-i18n="demo_coach_tip">üí° Your prompt is quite broad. Try specifying the tone (empathetic? formal?) and the key points to cover. This will help Claude produce a much more targeted result.</div>
          <div style="margin-top:8px;font-size:11px;color:var(--text-muted);" data-i18n="demo_coach_type">Type: Nudge technique</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- FEATURES -->
<section class="features" id="features">
  <div class="container">
    <div class="section-label" data-i18n="features_label">Why ClaudeSim</div>
    <h2 class="section-title" data-i18n="features_title">Bridge the Gap Between <span class="gradient-text">Knowing</span> and <span class="gradient-text">Using</span> AI</h2>
    <p class="section-subtitle" data-i18n="features_subtitle">Stop watching tutorials. Start practicing with Claude in real professional scenarios with expert coaching.</p>
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">üéÆ</div>
        <h3 data-i18n="f1_title">Interactive Simulations</h3>
        <p data-i18n="f1_text">Real professional scenarios with objectives, constraints, and deliverables. You use Claude ‚Äî for real ‚Äî through our split-screen interface.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">ü§ñ</div>
        <h3 data-i18n="f2_title">ARIA ‚Äî AI Coach</h3>
        <p data-i18n="f2_text">Your personal prompting coach observes your technique in real time. She suggests improvements, never gives you the answer.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üìä</div>
        <h3 data-i18n="f3_title">6 Competency Framework</h3>
        <p data-i18n="f3_text">Clarity, Advanced Techniques, Strategic Iteration, Critical Thinking, Efficiency, Ethics & Limits. Track your progression across all six.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üìã</div>
        <h3 data-i18n="f4_title">Detailed Debriefs</h3>
        <p data-i18n="f4_text">After each simulation, receive a comprehensive analysis: scores, strengths, improvements, and specific recommendations for your next session.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üåê</div>
        <h3 data-i18n="f5_title">Bilingual EN/FR</h3>
        <p data-i18n="f5_text">Full platform and coaching support in English and French. ARIA adapts to the language you use. Work with Claude in your preferred language.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">üîí</div>
        <h3 data-i18n="f6_title">Safe Space to Learn</h3>
        <p data-i18n="f6_text">Experiment, fail, and improve without judgment. No real-world consequences. Just accelerated learning in a structured environment.</p>
      </div>
    </div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="how-it-works" id="how-it-works">
  <div class="container">
    <div class="section-label" data-i18n="how_label">How It Works</div>
    <h2 class="section-title" data-i18n="how_title">Five Steps to <span class="gradient-text">AI Mastery</span></h2>
    <div class="steps">
      <div class="step"><div class="step-num">1</div><h4 data-i18n="s1_title">Brief</h4><p data-i18n="s1_text">Read the scenario and understand the deliverable</p></div>
      <div class="step"><div class="step-num">2</div><h4 data-i18n="s2_title">Prompt</h4><p data-i18n="s2_text">Formulate prompts to Claude and iterate</p></div>
      <div class="step"><div class="step-num">3</div><h4 data-i18n="s3_title">Coach</h4><p data-i18n="s3_text">ARIA observes and suggests technique improvements</p></div>
      <div class="step"><div class="step-num">4</div><h4 data-i18n="s4_title">Submit</h4><p data-i18n="s4_text">Submit your deliverable when satisfied</p></div>
      <div class="step"><div class="step-num">5</div><h4 data-i18n="s5_title">Debrief</h4><p data-i18n="s5_text">Review your scores and recommendations</p></div>
    </div>
  </div>
</section>

<!-- SCENARIOS -->
<section class="scenarios-section" id="scenarios">
  <div class="container">
    <div class="section-label" data-i18n="sc_label">Scenario Catalog</div>
    <h2 class="section-title" data-i18n="sc_title">Real-World <span class="gradient-text">Professional Scenarios</span></h2>
    <p class="section-subtitle" data-i18n="sc_subtitle">Beginner to Advanced. Communication, Analysis, Strategy, Research, Marketing, Legal.</p>
    <div class="scenarios-grid" id="scenariosGrid">
      <!-- Populated by JS -->
    </div>
  </div>
</section>

<!-- PRICING -->
<section class="pricing" id="pricing">
  <div class="container">
    <div class="section-label" data-i18n="pr_label">Pricing</div>
    <h2 class="section-title" data-i18n="pr_title">Start Free, <span class="gradient-text">Go Pro</span></h2>
    <p class="section-subtitle" data-i18n="pr_subtitle">Try your first simulation for free. Upgrade to unlock all scenarios and ARIA's full coaching.</p>
    <div class="pricing-grid">
      <div class="pricing-card">
        <h3 data-i18n="plan_free_name">Discovery</h3>
        <div class="price">$0 <span></span></div>
        <div class="price-note" data-i18n="plan_free_note">Free forever</div>
        <ul class="pricing-features">
          <li data-i18n="plan_free_f1">1 complete beginner scenario</li>
          <li data-i18n="plan_free_f2">ARIA coaching included</li>
          <li data-i18n="plan_free_f3">Debrief report</li>
          <li data-i18n="plan_free_f4">Competency snapshot</li>
        </ul>
        <button class="btn btn-secondary" onclick="showModal('register')" data-i18n="plan_free_cta">Get Started</button>
      </div>
      <div class="pricing-card featured">
        <h3 data-i18n="plan_pro_name">Pro Monthly</h3>
        <div class="price">$29 <span data-i18n="plan_pro_period">/month</span></div>
        <div class="price-note" data-i18n="plan_pro_note">10 simulations per month</div>
        <ul class="pricing-features">
          <li data-i18n="plan_pro_f1">All scenarios (present & future)</li>
          <li data-i18n="plan_pro_f2">Full ARIA coaching</li>
          <li data-i18n="plan_pro_f3">Detailed debrief reports</li>
          <li data-i18n="plan_pro_f4">Progress tracking & badges</li>
          <li data-i18n="plan_pro_f5">Bilingual EN/FR</li>
        </ul>
        <button class="btn btn-primary" onclick="handleCheckout('pro_monthly')" data-i18n="plan_pro_cta">Subscribe Now</button>
      </div>
      <div class="pricing-card">
        <h3 data-i18n="plan_life_name">Pro Lifetime</h3>
        <div class="price">$249 <span data-i18n="plan_life_period">once</span></div>
        <div class="price-note" data-i18n="plan_life_note">20 simulations per month ‚Äî forever</div>
        <ul class="pricing-features">
          <li data-i18n="plan_life_f1">Everything in Pro</li>
          <li data-i18n="plan_life_f2">All future scenarios included</li>
          <li data-i18n="plan_life_f3">Priority access to new features</li>
          <li data-i18n="plan_life_f4">Downloadable certificates</li>
          <li data-i18n="plan_life_f5">Best long-term value</li>
        </ul>
        <button class="btn btn-primary" onclick="handleCheckout('pro_lifetime')" data-i18n="plan_life_cta">Get Lifetime Access</button>
      </div>
    </div>
    <p style="text-align:center;margin-top:24px;font-size:13px;color:var(--text-muted);" data-i18n="pr_enterprise">üè¢ Enterprise plans from $2,500/year ‚Äî <a href="mailto:info@pandaprojet.com">Contact us</a></p>
  </div>
</section>

<!-- FAQ -->
<section class="faq" id="faq">
  <div class="container" style="text-align:center;">
    <div class="section-label">FAQ</div>
    <h2 class="section-title" data-i18n="faq_title">Frequently Asked <span class="gradient-text">Questions</span></h2>
    <div class="faq-list">
      <div class="faq-item"><div class="faq-q" data-i18n="faq1_q">Do I need my own Claude account?</div><div class="faq-a"><p data-i18n="faq1_a">No! ClaudeSim includes Claude access via our API integration. You interact with Claude directly inside the simulation ‚Äî no separate account needed.</p></div></div>
      <div class="faq-item"><div class="faq-q" data-i18n="faq2_q">What is ARIA?</div><div class="faq-a"><p data-i18n="faq2_a">ARIA (AI Readiness & Interaction Advisor) is your AI coaching assistant. She observes your prompts and provides real-time feedback on your technique ‚Äî she never gives you the answer.</p></div></div>
      <div class="faq-item"><div class="faq-q" data-i18n="faq3_q">Is ClaudeSim available in French?</div><div class="faq-a"><p data-i18n="faq3_a">Yes! The entire platform is bilingual English/French, and ARIA adapts to the language you use during simulations.</p></div></div>
      <div class="faq-item"><div class="faq-q" data-i18n="faq4_q">Can I use this for team training?</div><div class="faq-a"><p data-i18n="faq4_a">Absolutely. Our enterprise plans include team dashboards, custom scenarios, analytics, and SSO. Contact us at info@pandaprojet.com.</p></div></div>
      <div class="faq-item"><div class="faq-q" data-i18n="faq5_q">What makes this different from just using Claude directly?</div><div class="faq-a"><p data-i18n="faq5_a">Structure + Feedback. Claude alone gives you answers. ClaudeSim teaches you the technique ‚Äî with professional scenarios, coaching, scoring, and progression tracking.</p></div></div>
    </div>
  </div>
</section>

<!-- FINAL CTA -->
<section class="final-cta">
  <div class="container">
    <h2 data-i18n="cta_title">Ready to Master <span class="gradient-text">Claude</span>?</h2>
    <p data-i18n="cta_subtitle">Your first simulation is free. No credit card required.</p>
    <button class="btn btn-primary" onclick="showModal('register')" data-i18n="cta_btn">Start Free Simulation ‚Üí</button>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="container">
    <div class="footer-inner">
      <div class="footer-brand">Claude<span style="color:var(--accent-light)">Sim</span> ‚Äî Panda Projet Inc.</div>
      <div class="footer-links">
        <a href="mailto:info@pandaprojet.com">Contact</a>
        <a href="https://pandaprojet.com" target="_blank">Panda Projet</a>
      </div>
    </div>
    <div style="margin-top:16px;">
      <div class="footer-ecosystem">
        <a href="https://bizsimlive.com" target="_blank">BizSimHub</a>
        <a href="https://marketsimlive.com" target="_blank">MarketSim</a>
        <a href="https://negotiatesim.com" target="_blank">NegotiateSim</a>
        <a href="https://philosim.app" target="_blank">PhiloSim</a>
      </div>
    </div>
    <div class="footer-copy">¬© 2026 Panda Projet Inc. All rights reserved. Powered by Anthropic Claude API.</div>
  </div>
</footer>

<!-- AUTH MODAL -->
<div class="modal-overlay" id="authModal">
  <div class="modal">
    <button class="modal-close" onclick="hideModal()">‚úï</button>
    
    <!-- LOGIN VIEW -->
    <div id="loginView">
      <h2 data-i18n="login_title">Welcome Back</h2>
      <p class="subtitle" data-i18n="login_subtitle">Sign in to continue your AI literacy journey</p>
      <button class="btn-google" onclick="googleSignIn()">
        <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615Z"/><path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18Z"/><path fill="#FBBC05" d="M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.997 8.997 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332Z"/><path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58Z"/></svg>
        <span data-i18n="login_google">Sign in with Google</span>
      </button>
      <div class="form-divider"><span data-i18n="login_or">or</span></div>
      <form onsubmit="handleLogin(event)">
        <div class="form-group"><label data-i18n="login_email">Email</label><input type="email" id="loginEmail" required></div>
        <div class="form-group"><label data-i18n="login_password">Password</label><input type="password" id="loginPassword" required></div>
        <div class="form-forgot"><a onclick="showView('forgotView')" data-i18n="login_forgot">Forgot password?</a></div>
        <div class="form-error" id="loginError"></div>
        <button type="submit" class="btn btn-primary" style="width:100%" data-i18n="login_btn">Sign In</button>
      </form>
      <div class="form-switch"><span data-i18n="login_switch">Don't have an account?</span> <a onclick="showView('registerView')" data-i18n="login_switch_link">Sign up</a></div>
    </div>

    <!-- REGISTER VIEW -->
    <div id="registerView" style="display:none">
      <h2 data-i18n="reg_title">Create Account</h2>
      <p class="subtitle" data-i18n="reg_subtitle">Start your AI literacy journey today</p>
      <button class="btn-google" onclick="googleSignIn()">
        <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615Z"/><path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18Z"/><path fill="#FBBC05" d="M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.997 8.997 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332Z"/><path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58Z"/></svg>
        <span data-i18n="reg_google">Sign up with Google</span>
      </button>
      <div class="form-divider"><span data-i18n="reg_or">or</span></div>
      <form onsubmit="handleRegister(event)">
        <div class="form-group"><label data-i18n="reg_name">Full Name</label><input type="text" id="regName" required></div>
        <div class="form-group"><label data-i18n="reg_email">Email</label><input type="email" id="regEmail" required></div>
        <div class="form-group"><label data-i18n="reg_password">Password (min 8 chars)</label><input type="password" id="regPassword" required minlength="8"></div>
        <div class="form-error" id="regError"></div>
        <button type="submit" class="btn btn-primary" style="width:100%" data-i18n="reg_btn">Create Account</button>
      </form>
      <div class="form-switch"><span data-i18n="reg_switch">Already have an account?</span> <a onclick="showView('loginView')" data-i18n="reg_switch_link">Sign in</a></div>
    </div>

    <!-- FORGOT PASSWORD VIEW -->
    <div id="forgotView" style="display:none">
      <h2 data-i18n="forgot_title">Reset Password</h2>
      <p class="subtitle" data-i18n="forgot_subtitle">Enter your email and we'll send you a reset link</p>
      <form onsubmit="handleForgot(event)">
        <div class="form-group"><label data-i18n="forgot_email">Email</label><input type="email" id="forgotEmail" required></div>
        <div class="form-error" id="forgotError"></div>
        <button type="submit" class="btn btn-primary" style="width:100%" data-i18n="forgot_btn">Send Reset Link</button>
      </form>
      <div class="form-switch"><a onclick="showView('loginView')" data-i18n="forgot_back">‚Üê Back to Sign In</a></div>
    </div>

    <!-- RESET PASSWORD VIEW -->
    <div id="resetView" style="display:none">
      <h2 data-i18n="reset_title">New Password</h2>
      <p class="subtitle" data-i18n="reset_subtitle">Enter your new password</p>
      <form onsubmit="handleReset(event)">
        <div class="form-group"><label data-i18n="reset_password">New Password</label><input type="password" id="resetPassword" required minlength="6"></div>
        <div class="form-error" id="resetError"></div>
        <button type="submit" class="btn btn-primary" style="width:100%" data-i18n="reset_btn">Reset Password</button>
      </form>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
// ========================
// CONFIG
// ========================
const API = '';
const STRIPE_KEY = 'pk_live_YOUR_STRIPE_PUBLISHABLE_KEY'; // Replace with live key
const PRICE_IDS = {
  pro_monthly: 'price_XXXXX_monthly', // Replace with Stripe price IDs
  pro_lifetime: 'price_XXXXX_lifetime'
};

let currentUser = null;
let currentLang = localStorage.getItem('claudesim_lang') || 'en';

// ========================
// i18n
// ========================
const translations = {
  fr: {
    nav_features: 'Fonctionnalit√©s', nav_scenarios: 'Sc√©narios', nav_pricing: 'Tarifs', nav_login: 'Connexion',
    hero_badge: 'üéØ Plateforme de simulation en AI Literacy', hero_title: 'Apprendre <span class="gradient-text">Claude</span> par la pratique',
    hero_subtitle: 'Ma√Ætrisez le prompting IA √† travers des simulations professionnelles interactives. Sc√©narios r√©els, coaching en temps r√©el, progression mesurable.',
    hero_cta: 'Simulation gratuite ‚Üí', hero_cta2: 'Comment √ßa marche',
    stat_scenarios: 'Sc√©narios', stat_competencies: 'Comp√©tences suivies', stat_practice: 'Possibilit√©s de pratique',
    demo_brief: 'üìã Brief du sc√©nario', demo_claude: 'üí¨ Interface Claude', demo_aria: 'ü§ñ Coach ARIA',
    demo_brief_title: 'Sc√©nario S01', demo_brief_text: 'R√©digez un courriel professionnel pour annoncer une restructuration organisationnelle affectant 45 employ√©s. Maintenez le moral et la clart√©.',
    demo_level: 'Niveau : D√©butant ¬∑ 15 min', demo_chat_title: 'Chat avec Claude',
    demo_prompt: '‚Üí √âcris-moi un courriel sur la restructuration', demo_response: 'Claude : "Voici une √©bauche de courriel annon√ßant la restructuration organisationnelle..."',
    demo_coach_tip: 'üí° Ton prompt est assez large. Essaie de pr√©ciser le ton (empathique ? formel ?) et les points cl√©s √† couvrir. √áa aidera Claude √† produire un r√©sultat beaucoup plus cibl√©.',
    demo_coach_type: 'Type : Nudge technique',
    features_label: 'Pourquoi ClaudeSim', features_title: 'Comblez le foss√© entre <span class="gradient-text">conna√Ætre</span> et <span class="gradient-text">utiliser</span> l\'IA',
    features_subtitle: 'Arr√™tez les tutoriels. Pratiquez avec Claude dans des sc√©narios professionnels r√©els avec coaching expert.',
    f1_title: 'Simulations interactives', f1_text: 'Sc√©narios professionnels r√©els avec objectifs, contraintes et livrables. Vous utilisez Claude ‚Äî pour vrai ‚Äî dans notre interface split-screen.',
    f2_title: 'ARIA ‚Äî Coach IA', f2_text: 'Votre coach de prompting personnel observe votre technique en temps r√©el. Elle sugg√®re des am√©liorations, ne donne jamais la r√©ponse.',
    f3_title: '6 comp√©tences √©valu√©es', f3_text: 'Clart√©, Techniques avanc√©es, It√©ration strat√©gique, Pens√©e critique, Efficacit√©, √âthique & Limites. Suivez votre progression sur les six.',
    f4_title: 'D√©briefs d√©taill√©s', f4_text: 'Apr√®s chaque simulation, recevez une analyse compl√®te : scores, forces, am√©liorations, et recommandations sp√©cifiques.',
    f5_title: 'Bilingue EN/FR', f5_text: 'Plateforme et coaching en anglais et fran√ßais. ARIA s\'adapte √† la langue que vous utilisez.',
    f6_title: 'Espace s√©curitaire', f6_text: 'Exp√©rimentez, √©chouez et progressez sans jugement. Aucune cons√©quence r√©elle.',
    how_label: 'Comment √ßa marche', how_title: 'Cinq √©tapes vers la <span class="gradient-text">ma√Ætrise de l\'IA</span>',
    s1_title: 'Brief', s1_text: 'Lisez le sc√©nario et comprenez le livrable', s2_title: 'Prompt', s2_text: 'Formulez des prompts √† Claude et it√©rez',
    s3_title: 'Coaching', s3_text: 'ARIA observe et sugg√®re des am√©liorations', s4_title: 'Livraison', s4_text: 'Soumettez votre livrable quand satisfait',
    s5_title: 'D√©brief', s5_text: 'Examinez vos scores et recommandations',
    sc_label: 'Catalogue de sc√©narios', sc_title: 'Sc√©narios <span class="gradient-text">professionnels r√©els</span>',
    sc_subtitle: 'D√©butant √† Avanc√©. Communication, Analyse, Strat√©gie, Recherche, Marketing, Juridique.',
    pr_label: 'Tarifs', pr_title: 'Commencez gratuit, <span class="gradient-text">passez Pro</span>',
    pr_subtitle: 'Essayez votre premi√®re simulation gratuitement. Passez √† Pro pour d√©bloquer tous les sc√©narios.',
    plan_free_name: 'D√©couverte', plan_free_note: 'Gratuit pour toujours',
    plan_free_f1: '1 sc√©nario d√©butant complet', plan_free_f2: 'Coaching ARIA inclus', plan_free_f3: 'Rapport de d√©brief', plan_free_f4: 'Aper√ßu des comp√©tences', plan_free_cta: 'Commencer',
    plan_pro_name: 'Pro Mensuel', plan_pro_period: '/mois', plan_pro_note: '10 simulations par mois',
    plan_pro_f1: 'Tous les sc√©narios', plan_pro_f2: 'Coaching ARIA complet', plan_pro_f3: 'Rapports d√©taill√©s', plan_pro_f4: 'Suivi et badges', plan_pro_f5: 'Bilingue EN/FR', plan_pro_cta: 'S\'abonner',
    plan_life_name: 'Pro √† vie', plan_life_period: 'une fois', plan_life_note: '20 simulations/mois ‚Äî pour toujours',
    plan_life_f1: 'Tout dans Pro', plan_life_f2: 'Sc√©narios futurs inclus', plan_life_f3: 'Acc√®s prioritaire', plan_life_f4: 'Certificats t√©l√©chargeables', plan_life_f5: 'Meilleur rapport qualit√©-prix', plan_life_cta: 'Acc√®s √† vie',
    pr_enterprise: 'üè¢ Plans entreprise √† partir de 2 500$/an ‚Äî <a href="mailto:info@pandaprojet.com">Contactez-nous</a>',
    faq_title: 'Questions <span class="gradient-text">fr√©quentes</span>',
    faq1_q: 'Ai-je besoin de mon propre compte Claude ?', faq1_a: 'Non ! ClaudeSim inclut l\'acc√®s √† Claude via notre int√©gration API. Vous interagissez directement dans la simulation.',
    faq2_q: 'Qu\'est-ce qu\'ARIA ?', faq2_a: 'ARIA (AI Readiness & Interaction Advisor) est votre coach IA. Elle observe vos prompts et fournit du feedback en temps r√©el ‚Äî elle ne donne jamais la r√©ponse.',
    faq3_q: 'ClaudeSim est-il disponible en fran√ßais ?', faq3_a: 'Oui ! La plateforme est enti√®rement bilingue anglais/fran√ßais.',
    faq4_q: 'Peut-on l\'utiliser pour la formation d\'√©quipe ?', faq4_a: 'Absolument. Nos plans entreprise incluent des tableaux de bord, sc√©narios personnalis√©s et analytiques.',
    faq5_q: 'Quelle diff√©rence avec utiliser Claude directement ?', faq5_a: 'Structure + Feedback. Claude seul donne des r√©ponses. ClaudeSim enseigne la technique.',
    cta_title: 'Pr√™t √† ma√Ætriser <span class="gradient-text">Claude</span> ?', cta_subtitle: 'Votre premi√®re simulation est gratuite. Aucune carte de cr√©dit requise.', cta_btn: 'Simulation gratuite ‚Üí',
    login_title: 'Bienvenue', login_subtitle: 'Connectez-vous pour continuer', login_google: 'Connexion avec Google', login_or: 'ou',
    login_email: 'Courriel', login_password: 'Mot de passe', login_forgot: 'Mot de passe oubli√© ?', login_btn: 'Connexion',
    login_switch: 'Pas de compte ?', login_switch_link: 'Cr√©er un compte',
    reg_title: 'Cr√©er un compte', reg_subtitle: 'Commencez votre parcours en AI Literacy', reg_google: 'Inscription avec Google', reg_or: 'ou',
    reg_name: 'Nom complet', reg_email: 'Courriel', reg_password: 'Mot de passe (min 8 car.)', reg_btn: 'Cr√©er le compte',
    reg_switch: 'D√©j√† un compte ?', reg_switch_link: 'Connexion',
    forgot_title: 'R√©initialiser', forgot_subtitle: 'Entrez votre courriel pour recevoir un lien', forgot_email: 'Courriel', forgot_btn: 'Envoyer le lien', forgot_back: '‚Üê Retour √† la connexion',
    reset_title: 'Nouveau mot de passe', reset_subtitle: 'Entrez votre nouveau mot de passe', reset_password: 'Nouveau mot de passe', reset_btn: 'R√©initialiser'
  }
};

function applyLang() {
  if (currentLang === 'en') return;
  const t = translations[currentLang];
  if (!t) return;
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (t[key]) el.innerHTML = t[key];
  });
  document.querySelector('.nav-lang').textContent = currentLang === 'fr' ? 'EN' : 'FR';
}

function toggleLang() {
  currentLang = currentLang === 'en' ? 'fr' : 'en';
  localStorage.setItem('claudesim_lang', currentLang);
  if (currentLang === 'en') { location.reload(); } else { applyLang(); }
}

// ========================
// AUTH
// ========================
function showModal(view) {
  document.getElementById('authModal').classList.add('active');
  showView(view === 'login' ? 'loginView' : view === 'register' ? 'registerView' : view + 'View');
}
function hideModal() { document.getElementById('authModal').classList.remove('active'); }
function showView(id) {
  ['loginView','registerView','forgotView','resetView'].forEach(v => document.getElementById(v).style.display = 'none');
  document.getElementById(id).style.display = 'block';
}

function googleSignIn() { window.location.href = '/api/auth/google'; }

async function handleLogin(e) {
  e.preventDefault();
  const errEl = document.getElementById('loginError');
  errEl.classList.remove('show');
  try {
    const res = await fetch(`${API}/api/auth/login`, {
      method: 'POST', headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email: document.getElementById('loginEmail').value, password: document.getElementById('loginPassword').value })
    });
    const data = await res.json();
    if (!res.ok) { errEl.textContent = data.error; errEl.classList.add('show'); return; }
    localStorage.setItem('auth_token', data.token);
    currentUser = data.user;
    showToast('Welcome back!', 'success');
    hideModal();
    updateNavAuth();
    setTimeout(() => window.location.href = '/dashboard', 800);
  } catch(err) { errEl.textContent = 'Connection error'; errEl.classList.add('show'); }
}

async function handleRegister(e) {
  e.preventDefault();
  const errEl = document.getElementById('regError');
  errEl.classList.remove('show');
  try {
    const res = await fetch(`${API}/api/auth/register`, {
      method: 'POST', headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ name: document.getElementById('regName').value, email: document.getElementById('regEmail').value, password: document.getElementById('regPassword').value })
    });
    const data = await res.json();
    if (!res.ok) { errEl.textContent = data.error; errEl.classList.add('show'); return; }
    localStorage.setItem('auth_token', data.token);
    currentUser = data.user;
    showToast('Account created!', 'success');
    hideModal();
    gtag('event', 'sign_up', { method: 'email' });
    setTimeout(() => window.location.href = '/dashboard', 800);
  } catch(err) { errEl.textContent = 'Connection error'; errEl.classList.add('show'); }
}

async function handleForgot(e) {
  e.preventDefault();
  const errEl = document.getElementById('forgotError');
  try {
    const res = await fetch(`${API}/api/auth/forgot-password`, {
      method: 'POST', headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email: document.getElementById('forgotEmail').value })
    });
    showToast('If that email exists, a reset link has been sent.', 'success');
    showView('loginView');
  } catch(err) { errEl.textContent = 'Connection error'; errEl.classList.add('show'); }
}

async function handleReset(e) {
  e.preventDefault();
  const errEl = document.getElementById('resetError');
  const params = new URLSearchParams(window.location.search);
  try {
    const res = await fetch(`${API}/api/auth/reset-password`, {
      method: 'POST', headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ token: params.get('reset_token'), password: document.getElementById('resetPassword').value })
    });
    const data = await res.json();
    if (!res.ok) { errEl.textContent = data.error; errEl.classList.add('show'); return; }
    showToast('Password reset! Please sign in.', 'success');
    showView('loginView');
    history.replaceState(null, '', '/');
  } catch(err) { errEl.textContent = 'Connection error'; errEl.classList.add('show'); }
}

function updateNavAuth() {
  const navAuth = document.getElementById('navAuth');
  if (currentUser) {
    navAuth.innerHTML = `<div class="nav-user"><span class="nav-user-name">${currentUser.name}</span><a href="/dashboard" class="btn btn-primary nav-cta">Dashboard</a></div>`;
  }
}

function logout() {
  localStorage.removeItem('auth_token');
  currentUser = null;
  window.location.href = '/';
}

// ========================
// STRIPE
// ========================
async function handleCheckout(plan) {
  if (!currentUser) { showModal('register'); return; }
  try {
    const stripe = Stripe(STRIPE_KEY);
    const { error } = await stripe.redirectToCheckout({
      lineItems: [{ price: PRICE_IDS[plan], quantity: 1 }],
      mode: plan === 'pro_monthly' ? 'subscription' : 'payment',
      successUrl: window.location.origin + '/dashboard?payment=success',
      cancelUrl: window.location.origin + '#pricing',
    });
    if (error) showToast(error.message, 'error');
  } catch(err) { showToast('Payment setup failed', 'error'); }
}

// ========================
// SCENARIOS
// ========================
async function loadScenarios() {
  try {
    const res = await fetch(`${API}/api/scenarios`);
    const data = await res.json();
    const grid = document.getElementById('scenariosGrid');
    const lang = currentLang;
    grid.innerHTML = data.scenarios.map(s => `
      <div class="scenario-card">
        <div class="scenario-meta">
          <span class="scenario-tag domain">${s.domain}</span>
          <span class="scenario-tag level">${s.level}</span>
          ${s.is_free ? '<span class="scenario-tag free">FREE</span>' : '<span class="scenario-tag locked">PRO</span>'}
        </div>
        <h3>${lang === 'fr' ? s.title_fr : s.title_en}</h3>
        <p>${lang === 'fr' ? (s.description_fr || '').substring(0, 120) : (s.description_en || '').substring(0, 120)}...</p>
        <div class="scenario-footer">
          <span>‚è± ${s.duration_min} min</span>
          <div class="scenario-comps">${(s.competencies || []).map(c => `<span class="comp-badge">${c}</span>`).join('')}</div>
        </div>
      </div>
    `).join('');
  } catch(e) {
    // Fallback static content
    document.getElementById('scenariosGrid').innerHTML = `
      <div class="scenario-card"><div class="scenario-meta"><span class="scenario-tag domain">Communication</span><span class="scenario-tag level">Beginner</span><span class="scenario-tag free">FREE</span></div><h3>Write a Professional Change Announcement Email</h3><p>Draft a professional email to announce an organizational restructuring affecting 45 employees...</p><div class="scenario-footer"><span>‚è± 15 min</span><div class="scenario-comps"><span class="comp-badge">C1</span><span class="comp-badge">C3</span></div></div></div>
      <div class="scenario-card"><div class="scenario-meta"><span class="scenario-tag domain">Analysis</span><span class="scenario-tag level">Intermediate</span><span class="scenario-tag locked">PRO</span></div><h3>Analyze Sales Data and Create an Executive Report</h3><p>Produce an executive summary with key insights, trends, and recommendations from Q3 sales data...</p><div class="scenario-footer"><span>‚è± 30 min</span><div class="scenario-comps"><span class="comp-badge">C1</span><span class="comp-badge">C2</span><span class="comp-badge">C3</span><span class="comp-badge">C5</span></div></div></div>
      <div class="scenario-card"><div class="scenario-meta"><span class="scenario-tag domain">Strategy</span><span class="scenario-tag level">Intermediate</span><span class="scenario-tag locked">PRO</span></div><h3>Create a 10-Slide Strategic Presentation for the Board</h3><p>Create a compelling presentation covering market position, competitive analysis, growth strategy...</p><div class="scenario-footer"><span>‚è± 30 min</span><div class="scenario-comps"><span class="comp-badge">C1</span><span class="comp-badge">C2</span><span class="comp-badge">C3</span><span class="comp-badge">C4</span></div></div></div>`;
  }
}

// ========================
// UTILITY
// ========================
function showToast(msg, type) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.className = `toast ${type} show`;
  setTimeout(() => t.classList.remove('show'), 3500);
}

// FAQ toggles
document.querySelectorAll('.faq-q').forEach(q => {
  q.addEventListener('click', () => q.parentElement.classList.toggle('open'));
});

// Smooth scroll
document.querySelectorAll('a[href^="#"]').forEach(a => {
  a.addEventListener('click', e => {
    e.preventDefault();
    document.querySelector(a.getAttribute('href'))?.scrollIntoView({ behavior: 'smooth' });
  });
});

// ========================
// INIT
// ========================
async function init() {
  // Handle URL params
  const params = new URLSearchParams(window.location.search);
  
  // Google OAuth callback
  if (params.get('token')) {
    localStorage.setItem('auth_token', params.get('token'));
    if (params.get('newUser')) gtag('event', 'sign_up', { method: 'google' });
    history.replaceState(null, '', '/');
  }

  // Password reset
  if (params.get('reset_token')) {
    showModal('reset');
  }

  // Check auth
  const token = localStorage.getItem('auth_token');
  if (token) {
    try {
      const res = await fetch(`${API}/api/auth/me`, { headers: { 'Authorization': `Bearer ${token}` } });
      if (res.ok) {
        const data = await res.json();
        currentUser = data.user;
        updateNavAuth();
      } else {
        localStorage.removeItem('auth_token');
      }
    } catch(e) {}
  }

  applyLang();
  loadScenarios();
}

init();
</script>
</body>
</html>
